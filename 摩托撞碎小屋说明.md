# 摩托撞碎小屋功能说明 🏍️💥🏠

## 功能概述

当人物骑上雪地摩托时，可以撞碎小屋，产生大量木头碎片特效。

## 碰撞逻辑

### 1. 骑摩托时 🏍️
- ✅ **撞碎小屋**：产生大量木头碎片
- ✅ **撞碎石头**：产生灰色碎片
- ✅ **不减速**：保持高速前进
- ✅ **不计碰撞**：不增加碰撞次数
- ✅ **不摔倒**：继续骑行

### 2. 不骑摩托时 🎿
- ✅ **穿过小屋**：从前门进，后门出，无碰撞
- ❌ **撞到石头**：减速、摔倒、计碰撞

## 特效系统

### 撞碎小屋特效 🏠💥
```javascript
// 产生4种颜色的粒子
1. 深棕色木头：50个粒子 (#8B4513)
2. 浅棕色木头：30个粒子 (#A0522D)
3. 橙棕色木头：20个粒子 (#D2691E)
4. 白色雪花：15个粒子 (#FFFFFF)

总计：115个粒子
```

### 撞碎石头特效 🪨💥
```javascript
// 产生2种颜色的粒子
1. 棕色粒子：40个 (#8B4513)
2. 灰色碎片：20个 (#A0A0A0)

总计：60个粒子
```

## 提示信息

### 撞碎小屋
```
💥 摩托撞碎小屋！
```

### 撞碎石头
```
💥 摩托撞碎石头！
```

## 代码实现

### 碰撞检测逻辑
```javascript
if (this.checkCollision(this.panda, obs) && !obs.hit) {
    obs.hit = true;
    
    if (this.panda.ridingSnowmobile) {
        // 雪地摩托：撞碎所有障碍物
        this.handleSnowmobileSmash(obs);
        return false; // 移除障碍物
    } else {
        // 不骑摩托
        if (obs.type === 'house') {
            // 小屋：可以穿过
            obs.hit = false;
            return true; // 保留小屋
        } else {
            // 石头：普通碰撞
            this.handleObstacleCollision(obs);
            return false; // 移除石头
        }
    }
}
```

### 撞碎处理
```javascript
handleSnowmobileSmash(obstacle) {
    const centerX = obstacle.x + obstacle.width / 2;
    const centerY = obstacle.y + obstacle.height / 2;
    
    if (obstacle.type === 'house') {
        // 撞碎小屋：大量木头碎片
        this.createParticles(centerX, centerY, 50, '#8B4513');
        this.createParticles(centerX, centerY, 30, '#A0522D');
        this.createParticles(centerX, centerY, 20, '#D2691E');
        this.createParticles(centerX, centerY, 15, '#FFFFFF');
        this.showCombo(`💥 摩托撞碎小屋！`);
    } else {
        // 撞碎石头：灰色碎片
        this.createParticles(centerX, centerY, 40, '#8B4513');
        this.createParticles(centerX, centerY, 20, '#A0A0A0');
        this.showCombo(`💥 摩托撞碎石头！`);
    }
}
```

## 游戏体验

### 策略选择
1. **骑摩托** 🏍️
   - 优势：撞碎所有障碍物，无敌状态
   - 限制：有时间限制（倒计时）
   - 适用：快速通过障碍区

2. **不骑摩托** 🎿
   - 优势：可以穿过小屋（捷径）
   - 风险：撞到石头会摔倒
   - 适用：精准控制，避开石头

### 视觉反馈
- **大量粒子**：115个木头碎片飞溅
- **多彩效果**：4种颜色混合
- **爆炸感**：粒子从中心向四周扩散
- **提示文字**：屏幕显示"💥 摩托撞碎小屋！"

## 性能优化

- 粒子系统自动管理生命周期
- 粒子超出屏幕自动清除
- 碰撞检测只在有效范围内进行
- 障碍物被撞碎后立即移除

## 未来扩展

可能的增强功能：
- [ ] 撞碎小屋时播放木头破碎音效
- [ ] 增加屏幕震动效果
- [ ] 撞碎后获得额外分数
- [ ] 不同类型的建筑物（仓库、塔楼等）
- [ ] 撞碎连击系统
