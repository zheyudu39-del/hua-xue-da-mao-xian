# 🎮 滑雪大冒险 - 打包说明

## 打包准备

已创建以下文件：
- ✅ `package.json` - 项目配置和打包配置
- ✅ `main.js` - Electron主进程文件

## 打包步骤

### 1. 安装Node.js依赖

打开命令行（PowerShell或CMD），进入游戏目录：

```powershell
cd "e:\滑雪大冒险"
```

安装依赖：

```powershell
npm install
```

这将安装：
- `electron` - Electron框架
- `electron-builder` - 打包工具

### 2. 创建应用图标（可选）

如果你有图标文件：
1. 准备一个 `icon.ico` 文件（256x256或更大）
2. 放在游戏根目录
3. 如果没有图标，打包时会使用默认图标

### 3. 打包成exe

运行打包命令：

```powershell
npm run build:win
```

打包过程需要几分钟，完成后会在 `dist` 文件夹中生成：
- `滑雪大冒险 Setup 1.0.0.exe` - 安装程序
- `win-unpacked` 文件夹 - 免安装版本

## 打包配置说明

### package.json 配置

```json
{
  "name": "ski-adventure",
  "version": "1.0.0",
  "description": "滑雪大冒险 - 一款精美的滑雪游戏",
  "main": "main.js"
}
```

### 打包选项

```json
"build": {
  "appId": "com.ski.adventure",
  "productName": "滑雪大冒险",
  "win": {
    "target": "nsis",
    "icon": "icon.ico"
  },
  "nsis": {
    "oneClick": false,
    "allowToChangeInstallationDirectory": true,
    "createDesktopShortcut": true,
    "createStartMenuShortcut": true
  }
}
```

## 生成的文件

### 安装程序
- **文件名**：`滑雪大冒险 Setup 1.0.0.exe`
- **大小**：约150-200 MB
- **功能**：
  - 可选择安装目录
  - 创建桌面快捷方式
  - 创建开始菜单快捷方式
  - 支持卸载

### 免安装版本
- **位置**：`dist/win-unpacked/`
- **运行**：直接运行 `滑雪大冒险.exe`
- **优点**：无需安装，解压即用

## 测试打包结果

### 1. 测试安装程序
1. 双击 `滑雪大冒险 Setup 1.0.0.exe`
2. 选择安装目录
3. 完成安装
4. 运行游戏测试

### 2. 测试免安装版本
1. 进入 `dist/win-unpacked/` 文件夹
2. 双击 `滑雪大冒险.exe`
3. 测试游戏功能

## 分发方式

### 方式1：分发安装程序
- 优点：用户体验好，自动创建快捷方式
- 文件：`滑雪大冒险 Setup 1.0.0.exe`
- 大小：约150-200 MB

### 方式2：分发免安装版本
- 优点：无需安装，解压即用
- 文件：压缩 `dist/win-unpacked/` 文件夹
- 大小：约150-200 MB（压缩后约100 MB）

### 方式3：分发到云盘
1. 将exe上传到百度云盘/阿里云盘等
2. 分享下载链接
3. 用户下载后直接运行

## 常见问题

### Q1: 打包失败怎么办？

**A**: 检查以下几点：
1. 确保已安装Node.js（版本 >= 16）
2. 确保网络连接正常（需要下载Electron）
3. 尝试使用管理员权限运行命令
4. 清除缓存后重试：
   ```powershell
   npm cache clean --force
   npm install
   npm run build:win
   ```

### Q2: 打包的exe太大怎么办？

**A**: 这是正常的，因为包含了：
- Electron运行时（约100 MB）
- Chromium浏览器引擎（约50 MB）
- 游戏资源文件

可以通过以下方式减小：
1. 使用7-Zip压缩（可减小30-40%）
2. 只分发必要文件
3. 使用在线版本（不打包）

### Q3: 如何修改游戏版本号？

**A**: 修改 `package.json` 中的 `version` 字段：
```json
"version": "1.0.1"
```

### Q4: 如何添加游戏图标？

**A**: 
1. 准备一个 `.ico` 文件（推荐256x256）
2. 命名为 `icon.ico`
3. 放在游戏根目录
4. 重新打包

### Q5: 打包后游戏无法运行？

**A**: 检查：
1. 确保所有游戏文件都在目录中
2. 确保 `index.html` 在根目录
3. 检查 `main.js` 中的路径是否正确
4. 查看开发者工具（取消注释 `openDevTools()`）

## 快速打包命令

如果一切正常，只需运行：

```powershell
cd "e:\滑雪大冒险"
npm install
npm run build:win
```

等待几分钟，打包完成后在 `dist` 文件夹中找到exe文件。

## 文件结构

```
e:\滑雪大冒险\
├── index.html              # 游戏主页面
├── game.js                 # 游戏主逻辑
├── intro_cinematic.js      # 开场动画
├── style.css               # 样式文件
├── package.json            # 项目配置（新增）
├── main.js                 # Electron主进程（新增）
├── icon.ico                # 游戏图标（可选）
├── node_modules/           # 依赖包（安装后生成）
└── dist/                   # 打包输出（打包后生成）
    ├── 滑雪大冒险 Setup 1.0.0.exe  # 安装程序
    └── win-unpacked/       # 免安装版本
        └── 滑雪大冒险.exe
```

## 注意事项

1. **首次打包**：需要下载Electron，可能需要10-20分钟
2. **网络要求**：需要稳定的网络连接
3. **磁盘空间**：确保有至少1GB的可用空间
4. **杀毒软件**：可能需要暂时关闭杀毒软件
5. **文件完整性**：确保所有游戏文件都在目录中

## 技术支持

如果遇到问题：
1. 检查Node.js版本：`node --version`
2. 检查npm版本：`npm --version`
3. 查看错误日志
4. 尝试重新安装依赖

---

**版本**：1.0.0
**更新日期**：2025-11-25
**状态**：✅ 准备就绪

开始打包吧！🎮✨
