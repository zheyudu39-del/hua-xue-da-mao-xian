<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinå‡½æ•°è·³è·ƒæ›²çº¿å¯è§†åŒ–</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        canvas {
            display: block;
            margin: 20px auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        .control-group {
            display: inline-block;
            margin: 10px 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="range"] {
            width: 200px;
        }
        .value {
            display: inline-block;
            min-width: 50px;
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 5px;
            margin-left: 10px;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
        }
        button:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .info {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .formula {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¿ Sinå‡½æ•°æŠ›ç‰©çº¿è·³è·ƒå¯è§†åŒ–</h1>
        
        <canvas id="canvas" width="1000" height="400"></canvas>
        
        <div class="controls">
            <button id="startBtn">å¼€å§‹åŠ¨ç”»</button>
            <button id="resetBtn">é‡ç½®</button>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label>è·³è·ƒé«˜åº¦: <span class="value" id="heightValue">120</span></label>
                <input type="range" id="heightSlider" min="50" max="200" value="120">
            </div>
            <div class="control-group">
                <label>è·³è·ƒé€Ÿåº¦: <span class="value" id="speedValue">0.02</span></label>
                <input type="range" id="speedSlider" min="0.01" max="0.05" step="0.001" value="0.02">
            </div>
        </div>
        
        <div class="info">
            <h3>ğŸ“ æ•°å­¦åŸç†</h3>
            <div class="formula">
                y = startY - sin(Ï€ Ã— progress) Ã— height
            </div>
            <p><strong>è¯´æ˜ï¼š</strong></p>
            <ul>
                <li><strong>progress</strong>: ä»0åˆ°1çš„è·³è·ƒè¿›åº¦</li>
                <li><strong>sin(Ï€ Ã— progress)</strong>: åœ¨0åˆ°1ä¹‹é—´å½¢æˆå®Œç¾çš„æŠ›ç‰©çº¿</li>
                <li><strong>height</strong>: è·³è·ƒçš„æœ€å¤§é«˜åº¦</li>
            </ul>
            
            <h3>ğŸ­ èº«ä½“å§¿æ€</h3>
            <div class="formula">
                pose = -cos(Ï€ Ã— progress) Ã— 0.8
            </div>
            <p><strong>è¯´æ˜ï¼š</strong></p>
            <ul>
                <li><strong>ä¸Šå‡é˜¶æ®µ</strong> (progress < 0.5): èº«ä½“å‘åä»°</li>
                <li><strong>æœ€é«˜ç‚¹</strong> (progress = 0.5): èº«ä½“æ°´å¹³</li>
                <li><strong>ä¸‹é™é˜¶æ®µ</strong> (progress > 0.5): èº«ä½“å‘å‰å€¾</li>
            </ul>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        let isAnimating = false;
        let progress = 0;
        let jumpHeight = 120;
        let jumpSpeed = 0.02;
        let trajectoryPoints = [];
        
        const startY = 300;
        const startX = 100;
        const endX = 900;
        
        // æ§åˆ¶å™¨
        const heightSlider = document.getElementById('heightSlider');
        const speedSlider = document.getElementById('speedSlider');
        const heightValue = document.getElementById('heightValue');
        const speedValue = document.getElementById('speedValue');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        
        heightSlider.addEventListener('input', (e) => {
            jumpHeight = parseInt(e.target.value);
            heightValue.textContent = jumpHeight;
        });
        
        speedSlider.addEventListener('input', (e) => {
            jumpSpeed = parseFloat(e.target.value);
            speedValue.textContent = jumpSpeed.toFixed(3);
        });
        
        startBtn.addEventListener('click', () => {
            isAnimating = !isAnimating;
            startBtn.textContent = isAnimating ? 'æš‚åœåŠ¨ç”»' : 'å¼€å§‹åŠ¨ç”»';
            if (isAnimating) animate();
        });
        
        resetBtn.addEventListener('click', () => {
            progress = 0;
            trajectoryPoints = [];
            isAnimating = false;
            startBtn.textContent = 'å¼€å§‹åŠ¨ç”»';
            draw();
        });
        
        function draw() {
            // æ¸…ç©ºç”»å¸ƒ
            ctx.fillStyle = '#f0f0f0';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ç»˜åˆ¶ç½‘æ ¼
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width; i += 50) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, canvas.height);
                ctx.stroke();
            }
            for (let i = 0; i < canvas.height; i += 50) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(canvas.width, i);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶åœ°é¢
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, startY, canvas.width, canvas.height - startY);
            
            // ç»˜åˆ¶èµ·ç‚¹å’Œç»ˆç‚¹æ ‡è®°
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.arc(startX, startY, 5, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#f44336';
            ctx.beginPath();
            ctx.arc(endX, startY, 5, 0, Math.PI * 2);
            ctx.fill();
            
            // ç»˜åˆ¶å®Œæ•´çš„sinæ›²çº¿ï¼ˆé¢„è§ˆï¼‰
            ctx.strokeStyle = 'rgba(100, 100, 255, 0.3)';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            for (let i = 0; i <= 100; i++) {
                const p = i / 100;
                const x = startX + (endX - startX) * p;
                const sinValue = Math.sin(Math.PI * p);
                const y = startY - sinValue * jumpHeight;
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            ctx.setLineDash([]);
            
            // ç»˜åˆ¶è½¨è¿¹
            if (trajectoryPoints.length > 1) {
                ctx.strokeStyle = 'rgba(255, 100, 100, 0.8)';
                ctx.lineWidth = 4;
                ctx.lineCap = 'round';
                ctx.shadowColor = 'rgba(255, 100, 100, 0.5)';
                ctx.shadowBlur = 10;
                
                ctx.beginPath();
                ctx.moveTo(trajectoryPoints[0].x, trajectoryPoints[0].y);
                for (let i = 1; i < trajectoryPoints.length; i++) {
                    ctx.lineTo(trajectoryPoints[i].x, trajectoryPoints[i].y);
                }
                ctx.stroke();
                ctx.shadowBlur = 0;
                
                // ç»˜åˆ¶è½¨è¿¹ç‚¹
                ctx.fillStyle = 'rgba(255, 150, 150, 0.8)';
                for (let i = 0; i < trajectoryPoints.length; i += 2) {
                    ctx.beginPath();
                    ctx.arc(trajectoryPoints[i].x, trajectoryPoints[i].y, 3, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // è®¡ç®—å½“å‰ä½ç½®
            const sinValue = Math.sin(Math.PI * progress);
            const currentX = startX + (endX - startX) * progress;
            const currentY = startY - sinValue * jumpHeight;
            
            // è®¡ç®—å§¿æ€è§’åº¦
            const cosValue = Math.cos(Math.PI * progress);
            const poseAngle = -cosValue * 0.4;
            
            // ç»˜åˆ¶ç†ŠçŒ«ï¼ˆç®€åŒ–ç‰ˆï¼‰
            ctx.save();
            ctx.translate(currentX, currentY);
            ctx.rotate(poseAngle);
            
            // èº«ä½“
            ctx.fillStyle = '#333';
            ctx.fillRect(-15, -15, 30, 30);
            
            // å¤´
            ctx.fillStyle = '#fff';
            ctx.beginPath();
            ctx.arc(0, -20, 12, 0, Math.PI * 2);
            ctx.fill();
            
            // çœ¼ç›
            ctx.fillStyle = '#000';
            ctx.beginPath();
            ctx.arc(-5, -20, 3, 0, Math.PI * 2);
            ctx.arc(5, -20, 3, 0, Math.PI * 2);
            ctx.fill();
            
            // æ»‘é›ªæ¿
            ctx.fillStyle = '#ff6b6b';
            ctx.fillRect(-20, 10, 40, 5);
            
            ctx.restore();
            
            // æ˜¾ç¤ºä¿¡æ¯
            ctx.fillStyle = '#333';
            ctx.font = 'bold 16px Arial';
            ctx.fillText(`è¿›åº¦: ${(progress * 100).toFixed(1)}%`, 20, 30);
            ctx.fillText(`é«˜åº¦: ${(sinValue * jumpHeight).toFixed(1)}px`, 20, 55);
            ctx.fillText(`å§¿æ€è§’åº¦: ${(poseAngle * 180 / Math.PI).toFixed(1)}Â°`, 20, 80);
            
            // ç»˜åˆ¶sinå’Œcosæ›²çº¿å›¾
            drawMathGraph();
        }
        
        function drawMathGraph() {
            const graphX = 650;
            const graphY = 50;
            const graphWidth = 300;
            const graphHeight = 150;
            
            // èƒŒæ™¯
            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.fillRect(graphX, graphY, graphWidth, graphHeight);
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.strokeRect(graphX, graphY, graphWidth, graphHeight);
            
            // åæ ‡è½´
            ctx.strokeStyle = '#999';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(graphX, graphY + graphHeight / 2);
            ctx.lineTo(graphX + graphWidth, graphY + graphHeight / 2);
            ctx.stroke();
            
            // Sinæ›²çº¿
            ctx.strokeStyle = '#ff6b6b';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i <= 100; i++) {
                const p = i / 100;
                const x = graphX + p * graphWidth;
                const sinValue = Math.sin(Math.PI * p);
                const y = graphY + graphHeight / 2 - sinValue * (graphHeight / 2 - 10);
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // Cosæ›²çº¿
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i <= 100; i++) {
                const p = i / 100;
                const x = graphX + p * graphWidth;
                const cosValue = Math.cos(Math.PI * p);
                const y = graphY + graphHeight / 2 - cosValue * (graphHeight / 2 - 10);
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // å½“å‰ä½ç½®æ ‡è®°
            const currentX = graphX + progress * graphWidth;
            const sinValue = Math.sin(Math.PI * progress);
            const cosValue = Math.cos(Math.PI * progress);
            const sinY = graphY + graphHeight / 2 - sinValue * (graphHeight / 2 - 10);
            const cosY = graphY + graphHeight / 2 - cosValue * (graphHeight / 2 - 10);
            
            ctx.fillStyle = '#ff6b6b';
            ctx.beginPath();
            ctx.arc(currentX, sinY, 5, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.arc(currentX, cosY, 5, 0, Math.PI * 2);
            ctx.fill();
            
            // æ ‡ç­¾
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText('sin(Ï€x) - é«˜åº¦', graphX + 5, graphY + 15);
            ctx.fillStyle = '#4CAF50';
            ctx.fillText('cos(Ï€x) - å§¿æ€', graphX + 5, graphY + 30);
        }
        
        function animate() {
            if (!isAnimating) return;
            
            progress += jumpSpeed;
            
            if (progress >= 1) {
                progress = 0;
                trajectoryPoints = [];
            }
            
            // è®°å½•è½¨è¿¹ç‚¹
            const sinValue = Math.sin(Math.PI * progress);
            const currentX = startX + (endX - startX) * progress;
            const currentY = startY - sinValue * jumpHeight;
            trajectoryPoints.push({ x: currentX, y: currentY });
            
            draw();
            requestAnimationFrame(animate);
        }
        
        // åˆå§‹ç»˜åˆ¶
        draw();
    </script>
</body>
</html>
